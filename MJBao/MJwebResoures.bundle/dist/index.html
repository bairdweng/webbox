<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover">
    <title>登录</title>
    <link rel="stylesheet" href="./style/weui.css"/>
</head>
<style>
    .contentView {
        width: 100%;
        min-height: 100%;
        position: absolute;
        background-color: rgba(166, 166, 166, 0.5);
        background-image: url("../../test.png");
    }

    .weui-input {
        padding: 10px;
    }

    .main-background-color {
        background-color: #0bb20c;
    }

    .main-color {
        color: #0bb20c;
    }
</style>
<body ontouchstart>
<div class="contentView" align="center" id="loginPage">
    <div style="margin-left: 20px;margin-right: 20px;background-color: white;border-radius: 10px;border:1px rgba(218,218,218,0.2) solid;margin-top: 50px">
        <div class="weui-cells weui-cells_form">
            <input class="weui-input" type="tel" placeholder="请输入用户名"/>
            <input class="weui-input" type="password" placeholder="请输入密码"/>
        </div>
        <div style="width: 80%;margin-top: 40px;padding-bottom: 30px" align="center">
            <a href="javascript:void(0);" class="weui-btn weui-btn_primary main-background-color"
               onclick="login()">登录</a>
        </div>
        <div align="right" style="padding-right: 20px;margin-bottom: 20px">
            <a class="main-color" href="javascript:void(0);" onclick="onclickxy()">用户注册</a>
        </div>
    </div>
    <div style="position: absolute;left: 0px;right: 0px;bottom: 20px;">
        <a class="main-color" href="javascript:void(0);" onclick="onclickxy()">用户服务及协议</a>
    </div>
</div>
<script>
    //获取native的颜色。
    callMobile('getMainColor');
    callMobile('webBoxConfig', {
        "view.frame.origin.x": "23"
    });
    function login() {
        callMobile('pushViewController', {URL: 'http://www.9377.com/'})
    }
    function onclickxy() {
        var dicPath = window.location.href.replace('file://', '');
        callMobile('pushViewController', {
            URL: dicPath + 'agreement.html',
            dicPath: dicPath,
            test: window.location.href
        })
    }
    /*调用手机函数*/
    function callMobile(fun, parms) {
        try {
            fun(parms);
        } catch (error) {
            try {
                var dic = {
                    "function": fun,
                    "parameters": parms
                };
                window.webkit.messageHandlers['Native'].postMessage(dic);
            } catch (error) {
                console.log('error===', error);
            }
        }
    }
    function NativeCallBack(funtion, parameter) {
        var object = JSON.parse(parameter);
        if (funtion === 'getMainColor') {
            var color = object['name'];
            var divs = document.getElementsByClassName('main-background-color');
            for (var j in divs) {
                divs[j].style.backgroundColor = '#' + color;
            }
            var mainColors = document.getElementsByClassName('mainColor');
            for (var i in mainColors) {
                divs[i].style.backgroundColor = '#' + color;
            }
        }
    }
</script>

</body>
